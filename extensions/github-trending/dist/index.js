"use strict";(()=>{function o(t){let e=new MessageChannel;e.port1.onmessage=n=>{t(n.data.value)},self.postMessage({type:"InitOnFilterChange"},[e.port2])}function r(t){postMessage({type:"Loading.",data:t})}function a(t){postMessage({type:"Render",component:t.toJSON()})}var u=class{constructor(t=[]){this.items=t,this.isShowingDetail=!1,this.isLoading=!1,this.filtering=!0,this.titleLayout="row",this.setItems=e=>(this.items=e,this),this.addItem=e=>(this.items.push(e),this),this.setLoading=e=>(this.isLoading=e,this),this.setShowingDetail=e=>(this.isShowingDetail=e,this)}setTitleLayout(t){return this.titleLayout=t,this}setFiltering(t){return this.filtering=t,this}toJSON(){return{type:"list",isLoading:this.isLoading,isShowingDetail:this.isShowingDetail,filtering:this.filtering,titleLayout:this.titleLayout,items:this.items.map(t=>t.detail?{...t,detail:t.detail.toJSON()}:t)}}};async function h(t="daily",e=""){let n=`https://gtrend.yapie.me/repositories?since=${t}`;return e&&(n+=`&language=${e}`),await fetch(n).then(s=>s.json())}async function g(){r({type:"spinner"});let t=await l(),e=new u(t).setTitleLayout("column");o(async n=>{r({type:"spinner"});let i=await l(n.since,n.language);e.setItems(i),a(e)}),a(e)}async function l(t="",e=""){return(await h(t,e)).map((s,c)=>({icon:c+1,title:`${s.author}/${s.name}`,subtitle:s.description,actions:[{type:"OpenInBrowser",url:s.url}],extra:[{icon:"star.svg",text:s.stars},{text:{value:`+${s.currentPeriodStars}`,color:"green"}}]}))}g();})();
